SpareRoom Chat Assistant UI and API Proposal

Frontend UI Design

Chat Conversation Interface

-   Layout: The main area of the app will be a chat-style interface,
    similar to WhatsApp or OpenAI Chat. Messages from the user appear on
    one side and messages from the assistant on the other.
-   Message Bubbles: Each message appears in a Material UI Paper or Card
    bubble, right‑aligned for the user and left‑aligned for the
    assistant.
-   Text Input: A fixed bottom input area with a TextField and Send
    button.
-   Scrolling: Chat scrolls vertically, newest messages shown at the
    bottom with automatic scroll‑to‑bottom.

Top Listings Panel

-   Purpose: Shows the current top 3 ranked listings based on the
    conversation and rules.
-   Content: Each listing is a Card with image, title, price, location,
    short description, and maybe a link.
-   Layout: Panel on the right side, vertical stack of three cards.
-   Updating: Refreshes whenever new recommendations are generated.

Hard Rules Panel

-   Purpose: Shows the extracted hard rules such as budget, location,
    must‑have features.
-   Display: Material UI Chips or List Items (e.g. “Max budget £700”,
    “Location: Zone 1”).
-   Editing: Chips can be clickable or have edit icons. Editing updates
    backend rules and triggers new ranking.
-   Layout: Below listings panel or as a small section of the right
    sidebar.

Overall Layout

-   Two‑column layout: left = chat, right = listings + rules.
-   Material UI Grid or Box used for layout.
-   Optional AppBar with title “SpareRoom Assistant”.
-   Styling uses Material UI theme. Desktop‑first, simple responsive
    degradation.

------------------------------------------------------------------------

Backend API Contract

POST /api/chat

Send a user message and receive: - assistantMessage: The LLM reply. -
hardRules: Extracted/updated rule set. - topListings: The top 3 ranked
listings.

Request example: { “message”: “I’m looking for a room around £700 in
London, preferably central.” }

Response example: { “assistantMessage”: “Sure, here are some places that
match…”, “hardRules”: [ { “field”: “max_budget”, “value”: 700, “unit”:
“GBP” }, { “field”: “location”, “value”: “Central London” } ],
“topListings”: [ { “id”: “listing_12345”, “title”: “Room in Zone 1
Chelsea”, “price”: 680, “location”: “SW3”, “imageUrl”: “…”, “url”: “…”,
“summary”: “Spacious ensuite room…” } ] }

Pipeline internally: 1. Store message → LLM response
2. Extract rules
3. Filter listings
4. Compute embedding similarity
5. LLM reranking (multimodal)
6. Return top 3

------------------------------------------------------------------------

GET /api/listings/top?count=N

Return the top N listings given current rules and conversation state.

Example response: [ { “id”: “…”, “title”: “…”, “price”: …, “imageUrl”:
“…”, “url”: “…” }]

------------------------------------------------------------------------

GET /api/rules

Returns the current extracted rules.

Response: { “hardRules”: [ { “field”: “max_budget”, “value”: 700 }, {
“field”: “location”, “value”: “Zone 1” } ] }

------------------------------------------------------------------------

PUT /api/rules

User‑edited rules. Recompute recommendations.

Request: { “hardRules”: [ { “field”: “max_budget”, “value”: 800 }, {
“field”: “location”, “value”: “Zone 1” } ] }

Response: { “hardRules”: […], “topListings”: […] }

------------------------------------------------------------------------

Example User Flow

1.  User loads app → optional initial recommendations.
2.  User: “Need a room in London under £700.”
    → backend extracts rules + ranks listings → UI updates chat, rules,
    top 3.
3.  User: “Prefer Zone 1, must allow pets.”
    → updated rules, new rankings.
4.  User manually edits max_budget from 700 → 800 in UI.
    → PUT /api/rules → new results returned.
5.  Conversation + ranking continues.

------------------------------------------------------------------------

Notes

-   Scraping runs in background batches.
-   Redis may store embeddings.
-   Single user so no authentication.
-   Chat + side recommendations = simple MVP architecture.
